<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>C++基础：流与文件系统 | AillianYue's Blog</title><meta name="author" content="AillianYue"><meta name="copyright" content="AillianYue"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="介绍流和文件系统">
<meta property="og:type" content="article">
<meta property="og:title" content="C++基础：流与文件系统">
<meta property="og:url" content="http://example.com/2023/12/03/C++%E5%9F%BA%E7%A1%80%EF%BC%9A%E6%B5%81%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/index.html">
<meta property="og:site_name" content="AillianYue&#39;s Blog">
<meta property="og:description" content="介绍流和文件系统">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/CPlusPlus.webp">
<meta property="article:published_time" content="2023-12-03T11:50:00.000Z">
<meta property="article:modified_time" content="2025-05-01T12:09:00.000Z">
<meta property="article:author" content="AillianYue">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/CPlusPlus.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "C++基础：流与文件系统",
  "url": "http://example.com/2023/12/03/C++%E5%9F%BA%E7%A1%80%EF%BC%9A%E6%B5%81%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/",
  "image": "http://example.com/img/CPlusPlus.webp",
  "datePublished": "2023-12-03T11:50:00.000Z",
  "dateModified": "2025-05-01T12:09:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "AillianYue",
      "url": "https://github.com/AillianYue"
    }
  ]
}</script><link rel="shortcut icon" href="/img/avatar.png"><link rel="canonical" href="http://example.com/2023/12/03/C++%E5%9F%BA%E7%A1%80%EF%BC%9A%E6%B5%81%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'C++基础：流与文件系统',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 历程</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img fixed" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">AillianYue's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">C++基础：流与文件系统</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 历程</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">C++基础：流与文件系统</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-12-03T11:50:00.000Z" title="发表于 2023-12-03 19:50:00">2023-12-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-05-01T12:09:00.000Z" title="更新于 2025-05-01 20:09:00">2025-05-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/C/">C++</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/C/C-%E5%9F%BA%E7%A1%80/">C++基础</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">3.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>16分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="container post-content" id="article-container"><p>VERSION：3.0.0</p>
<h2 id="C-流"><a href="#C-流" class="headerlink" title="C++ 流"></a>C++ 流</h2><h3 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h3><h4 id="流类"><a href="#流类" class="headerlink" title="流类"></a>流类</h4><ul>
<li>定义：C++ 流是 “数据传输的通道”，流类是标准库提供的用于管理数据输入 &#x2F; 输出（I&#x2F;O）的类体系，核心基类是 <code>std::ios</code>，派生类分为输入流、输出流、双向流：<ul>
<li>输入流：<code>std::istream</code>（通用输入）、<code>std::ifstream</code>（文件输入）、<code>std::istringstream</code>（字符串输入）；</li>
<li>输出流：<code>std::ostream</code>（通用输出）、<code>std::ofstream</code>（文件输出）、<code>std::ostringstream</code>（字符串输出）；</li>
<li>双向流：<code>std::iostream</code>、<code>std::fstream</code>、<code>std::stringstream</code>（兼具输入 &#x2F; 输出）。</li>
</ul>
</li>
<li>要点：<code>std::cin</code> 是 <code>istream</code> 实例，<code>std::cout</code>&#x2F;<code>std::cerr</code> 是 <code>ostream</code> 实例，是最常用的流对象。</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="comment">// 基础流对象使用</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;输入一个数字：&quot;</span>; <span class="comment">// ostream 输出</span></span><br><span class="line">    std::cin &gt;&gt; num; <span class="comment">// istream 输入</span></span><br><span class="line">    std::cerr &lt;&lt; <span class="string">&quot;错误提示示例&quot;</span> &lt;&lt; std::endl; <span class="comment">// 无缓冲的错误输出</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="流状态"><a href="#流状态" class="headerlink" title="流状态"></a>流状态</h4><ul>
<li>定义：流对象内部维护的 “状态标志位”，用于标识 I&#x2F;O 操作是否成功，核心标志位（<code>std::ios</code> 枚举）：<ul>
<li><code>goodbit</code>：无错误，操作成功；</li>
<li><code>failbit</code>：逻辑错误（如读取非数字到 int 变量），流仍可用；</li>
<li><code>badbit</code>：底层硬件 &#x2F; 系统错误（如文件损坏），流可能不可用；</li>
<li><code>eofbit</code>：到达输入流末尾（如读文件到最后）。</li>
</ul>
</li>
<li>要点：<ul>
<li>可通过 <code>good()</code>&#x2F;<code>fail()</code>&#x2F;<code>bad()</code>&#x2F;<code>eof()</code> 方法检查状态；</li>
<li>流操作失败后会 “置位”，需用 <code>clear()</code> 重置状态才能继续使用。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    std::cin &gt;&gt; num; <span class="comment">// 若输入&quot;abc&quot;，会置位 failbit</span></span><br><span class="line">    <span class="keyword">if</span> (std::cin.<span class="built_in">fail</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;输入类型错误&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cin.<span class="built_in">clear</span>(); <span class="comment">// 重置状态</span></span><br><span class="line">        std::cin.<span class="built_in">ignore</span>(<span class="number">100</span>, <span class="string">&#x27;\n&#x27;</span>); <span class="comment">// 清空输入缓冲区的错误数据</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="缓冲和刷新"><a href="#缓冲和刷新" class="headerlink" title="缓冲和刷新"></a>缓冲和刷新</h4><ul>
<li>定义：流的 “缓冲区” 是内存中临时存储数据的区域，目的是减少硬件 I&#x2F;O 次数（提升效率），分为：<ul>
<li>全缓冲：缓冲区满才写入硬件（如文件流）；</li>
<li>行缓冲：遇到换行符 <code>\n</code> 写入硬件（如 <code>std::cout</code>）；</li>
<li>无缓冲：立即写入硬件（如 <code>std::cerr</code>）。</li>
</ul>
</li>
<li>要点：<ul>
<li>手动刷新缓冲区：用 <code>flush()</code>（刷新）、<code>endl()</code>（换行 + 刷新）、<code>sync()</code>（同步）；</li>
<li>注意：频繁刷新会降低效率，仅必要时使用（如实时日志输出）。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;无换行，不刷新&quot;</span> &lt;&lt; std::flush; <span class="comment">// 手动刷新</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;换行并刷新&quot;</span> &lt;&lt; std::endl; <span class="comment">// endl = &#x27;\n&#x27; + flush</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="操纵符"><a href="#操纵符" class="headerlink" title="操纵符"></a>操纵符</h4><ul>
<li>定义：用于修改流的格式 &#x2F; 行为的 “特殊函数”，分为无参数（如 <code>endl</code>）和有参数（如 <code>setw</code>）两类，需包含头文件 <code>&lt;iomanip&gt;</code>（有参数操纵符）。</li>
<li>常用操纵符：<ul>
<li>格式控制：<code>setw(n)</code>（设置输出宽度）、<code>left/right</code>（左 &#x2F; 右对齐）、<code>fixed/scientific</code>（浮点数格式）；</li>
<li>类型转换：<code>hex/oct/dec</code>（十六 &#x2F; 八 &#x2F; 十进制输出）；</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">double</span> pi = <span class="number">3.1415926</span>;</span><br><span class="line">    std::cout &lt;&lt; std::fixed &lt;&lt; std::<span class="built_in">setprecision</span>(<span class="number">2</span>) &lt;&lt; pi &lt;&lt; std::endl; <span class="comment">// 输出 3.14</span></span><br><span class="line">    std::cout &lt;&lt; std::<span class="built_in">setw</span>(<span class="number">5</span>) &lt;&lt; std::left &lt;&lt; <span class="string">&quot;abc&quot;</span> &lt;&lt; std::endl; <span class="comment">// 左对齐，宽度5</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="流的应用"><a href="#流的应用" class="headerlink" title="流的应用"></a>流的应用</h3><h4 id="用户自定义类型适配流"><a href="#用户自定义类型适配流" class="headerlink" title="用户自定义类型适配流"></a>用户自定义类型适配流</h4><ul>
<li>定义：默认情况下，自定义类无法直接用 <code>&lt;&lt;</code>&#x2F;<code>&gt;&gt;</code> 操作流，需重载 <code>operator&lt;&lt;</code>（输出流）和 <code>operator&gt;&gt;</code>（输入流）。</li>
<li>要点：<ul>
<li>重载函数通常定义为全局函数（或友元），返回流对象引用（支持链式调用）；</li>
<li>遵循 “输入 &#x2F; 输出格式一致” 原则，避免解析错误。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 重载输出流</span></span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt;(std::ostream&amp; os, <span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">    os &lt;&lt; p.name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; p.age;</span><br><span class="line">    <span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 重载输入流</span></span><br><span class="line">std::istream&amp; <span class="keyword">operator</span>&gt;&gt;(std::istream&amp; is, Person&amp; p) &#123;</span><br><span class="line">    is &gt;&gt; p.name &gt;&gt; p.age;</span><br><span class="line">    <span class="keyword">return</span> is;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Person p&#123;<span class="string">&quot;张三&quot;</span>, <span class="number">20</span>&#125;;</span><br><span class="line">    std::cout &lt;&lt; p &lt;&lt; std::endl; <span class="comment">// 输出：张三 20</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="字符串流"><a href="#字符串流" class="headerlink" title="字符串流"></a>字符串流</h4><ul>
<li>定义：<code>std::stringstream</code>（<code>&lt;sstream&gt;</code> 头文件），将字符串作为 “流” 来操作，核心用途：<ul>
<li>字符串与基本类型的转换（替代 <code>atoi</code>&#x2F;<code>itoa</code>，更安全）；</li>
<li>拼接 &#x2F; 拆分字符串（无需手动处理缓冲区）。</li>
</ul>
</li>
<li>要点：<ul>
<li>用 <code>str()</code> 方法获取 &#x2F; 设置底层字符串；</li>
<li>重复使用时需用 <code>clear()</code> 重置状态 + <code>str(&quot;&quot;)</code> 清空内容。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 数字转字符串</span></span><br><span class="line">    std::ostringstream oss;</span><br><span class="line">    oss &lt;&lt; <span class="number">123</span> &lt;&lt; <span class="string">&quot;abc&quot;</span> &lt;&lt; <span class="number">3.14</span>;</span><br><span class="line">    std::string s = oss.<span class="built_in">str</span>(); <span class="comment">// s = &quot;123abc3.14&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 字符串转数字</span></span><br><span class="line">    <span class="function">std::istringstream <span class="title">iss</span><span class="params">(<span class="string">&quot;456&quot;</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    iss &gt;&gt; num; <span class="comment">// num = 456</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="文件流"><a href="#文件流" class="headerlink" title="文件流"></a>文件流</h4><ul>
<li>定义：<code>std::fstream</code>&#x2F;<code>std::ifstream</code>&#x2F;<code>std::ofstream</code>（<code>&lt;fstream&gt;</code> 头文件），用于读写文件，分为文本模式（默认）和二进制模式。</li>
<li>要点：<ul>
<li>打开文件：用构造函数或 <code>open()</code> 方法，指定打开模式（<code>std::ios::in</code> 读、<code>std::ios::out</code> 写、<code>std::ios::app</code> 追加、<code>std::ios::binary</code> 二进制）；</li>
<li>关闭文件：<code>close()</code> 方法（析构时自动关闭，但手动关闭更规范）；</li>
<li>二进制读写：用 <code>read()</code>&#x2F;<code>write()</code> 方法，需传入字节数。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 写文本文件</span></span><br><span class="line">    <span class="function">std::ofstream <span class="title">ofs</span><span class="params">(<span class="string">&quot;test.txt&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (ofs.<span class="built_in">is_open</span>()) &#123; <span class="comment">// 检查文件是否打开成功</span></span><br><span class="line">        ofs &lt;&lt; <span class="string">&quot;hello file&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        ofs.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 读文本文件</span></span><br><span class="line">    <span class="function">std::ifstream <span class="title">ifs</span><span class="params">(<span class="string">&quot;test.txt&quot;</span>)</span></span>;</span><br><span class="line">    std::string line;</span><br><span class="line">    <span class="keyword">if</span> (ifs.<span class="built_in">is_open</span>()) &#123;</span><br><span class="line">        <span class="keyword">while</span> (std::<span class="built_in">getline</span>(ifs, line)) &#123; <span class="comment">// 按行读取</span></span><br><span class="line">            std::cout &lt;&lt; line &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line">        ifs.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="流缓冲区"><a href="#流缓冲区" class="headerlink" title="流缓冲区"></a>流缓冲区</h4><ul>
<li>定义：<code>std::streambuf</code> 是流的 “底层数据存储层”，流对象（如 <code>cout</code>）本质是对 <code>streambuf</code> 的封装，所有 I&#x2F;O 操作最终通过 <code>streambuf</code> 完成。</li>
<li>要点：<ul>
<li>可通过 <code>rdbuf()</code> 方法获取 &#x2F; 替换流的缓冲区；</li>
<li>用途：重定向输出（如把 <code>cout</code> 输出到文件）、自定义缓冲区。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::ofstream <span class="title">ofs</span><span class="params">(<span class="string">&quot;redirect.txt&quot;</span>)</span></span>;</span><br><span class="line">    std::streambuf* old_buf = std::cout.<span class="built_in">rdbuf</span>(); <span class="comment">// 保存cout原缓冲区</span></span><br><span class="line">    std::cout.<span class="built_in">rdbuf</span>(ofs.<span class="built_in">rdbuf</span>()); <span class="comment">// 重定向cout到文件</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;这段内容会写入文件&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    std::cout.<span class="built_in">rdbuf</span>(old_buf); <span class="comment">// 恢复cout原缓冲区</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;这段内容输出到控制台&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="随机访问"><a href="#随机访问" class="headerlink" title="随机访问"></a>随机访问</h4><ul>
<li>定义：通过 “文件指针”（流位置）直接定位到文件的任意位置读写，而非顺序读写，核心方法（<code>&lt;fstream&gt;</code>）：<ul>
<li>输入流：<code>seekg(pos)</code>（移动读指针）、<code>tellg()</code>（获取读指针位置）；</li>
<li>输出流：<code>seekp(pos)</code>（移动写指针）、<code>tellp()</code>（获取写指针位置）；</li>
</ul>
</li>
<li>要点：<ul>
<li>偏移量单位是 “字节”，支持相对位置（<code>std::ios::beg</code> 开头、<code>std::ios::cur</code> 当前、<code>std::ios::end</code> 末尾）；</li>
<li>二进制文件随机访问更常用，文本文件因编码（如换行符）可能位置计算不准。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::fstream <span class="title">fs</span><span class="params">(<span class="string">&quot;test.txt&quot;</span>, std::ios::in | std::ios::out)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (fs.<span class="built_in">is_open</span>()) &#123;</span><br><span class="line">        fs.<span class="built_in">seekg</span>(<span class="number">2</span>, std::ios::beg); <span class="comment">// 移动读指针到第2字节位置</span></span><br><span class="line">        <span class="type">char</span> c;</span><br><span class="line">        fs &gt;&gt; c; <span class="comment">// 读取该位置的字符</span></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;第2字节字符：&quot;</span> &lt;&lt; c &lt;&lt; std::endl;</span><br><span class="line">        fs.<span class="built_in">seekp</span>(<span class="number">0</span>, std::ios::end); <span class="comment">// 移动写指针到文件末尾</span></span><br><span class="line">        fs &lt;&lt; <span class="string">&quot;追加内容&quot;</span>; <span class="comment">// 在末尾写入</span></span><br><span class="line">        fs.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="C-文件系统（std-filesystem）"><a href="#C-文件系统（std-filesystem）" class="headerlink" title="C++ 文件系统（std::filesystem）"></a>C++ 文件系统（std::filesystem）</h2><h3 id="文件系统基础概念"><a href="#文件系统基础概念" class="headerlink" title="文件系统基础概念"></a>文件系统基础概念</h3><ul>
<li>定义：C++17 引入的 <code>std::filesystem</code> 库（<code>&lt;filesystem&gt;</code> 头文件），提供跨平台的文件 &#x2F; 目录操作接口，解决传统 <code>mkdir</code>&#x2F;<code>rmdir</code> 等函数跨平台兼容问题。</li>
<li>核心概念：<ul>
<li>路径（path）：表示文件 &#x2F; 目录的位置（兼容 Windows <code>\</code>、Linux <code>/</code>）；</li>
<li>目录条目（directory_entry）：封装路径 + 文件属性（大小、类型等）；</li>
<li>文件状态（file_status）：描述文件类型（普通文件、目录、符号链接等）；</li>
</ul>
</li>
<li>要点：编译时需注意编译器版本（GCC 8+&#x2F;Clang 7+&#x2F;MSVC 2017+ 支持）。</li>
</ul>
<h3 id="std-filesystem-path"><a href="#std-filesystem-path" class="headerlink" title="std::filesystem::path"></a>std::filesystem::path</h3><h4 id="构造路径"><a href="#构造路径" class="headerlink" title="构造路径"></a>构造路径</h4><ul>
<li>定义：<code>path</code> 是文件系统的核心类，支持多种构造方式，自动处理跨平台路径分隔符。</li>
<li>常用构造方式：<ul>
<li>字符串构造：<code>path p(&quot;test.txt&quot;)</code>、<code>path p(&quot;dir/subdir&quot;)</code>；</li>
<li>多段拼接构造：<code>path p(&quot;dir&quot;) / &quot;subdir&quot; / &quot;file.txt&quot;</code>（<code>/</code> 是重载运算符，推荐）；</li>
<li>空路径、当前路径：<code>path()</code>、<code>current_path()</code>（获取当前工作目录）。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;filesystem&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> fs = std::filesystem; <span class="comment">// 简化命名空间</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fs::path p1 = <span class="string">&quot;dir/file.txt&quot;</span>;</span><br><span class="line">    fs::path p2 = <span class="string">&quot;dir&quot;</span> / <span class="string">&quot;subdir&quot;</span> / <span class="string">&quot;test.txt&quot;</span>; <span class="comment">// 跨平台拼接</span></span><br><span class="line">    fs::path p3 = fs::<span class="built_in">current_path</span>(); <span class="comment">// 获取当前工作目录</span></span><br><span class="line">    std::cout &lt;&lt; p3 &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="拆解路径"><a href="#拆解路径" class="headerlink" title="拆解路径"></a>拆解路径</h4><ul>
<li>定义：拆分 <code>path</code> 的各个组成部分，便于解析文件位置、名称、后缀等。</li>
<li>常用方法：<ul>
<li><code>root_name()</code>：根名称（如 Windows 的 <code>C:</code>）；</li>
<li><code>root_directory()</code>：根目录（如 <code>/</code>、<code>\</code>）；</li>
<li><code>parent_path()</code>：父目录（如 <code>dir/sub/file.txt</code> → <code>dir/sub</code>）；</li>
<li><code>filename()</code>：文件名（含后缀，如 <code>file.txt</code>）；</li>
<li><code>stem()</code>：文件名（无后缀，如 <code>file</code>）；</li>
<li><code>extension()</code>：文件后缀（如 <code>.txt</code>）。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;filesystem&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> fs = std::filesystem;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fs::path p = <span class="string">&quot;C:/dir/sub/file.txt&quot;</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;父目录：&quot;</span> &lt;&lt; p.<span class="built_in">parent_path</span>() &lt;&lt; std::endl; <span class="comment">// C:/dir/sub</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;文件名：&quot;</span> &lt;&lt; p.<span class="built_in">filename</span>() &lt;&lt; std::endl; <span class="comment">// file.txt</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;后缀：&quot;</span> &lt;&lt; p.<span class="built_in">extension</span>() &lt;&lt; std::endl; <span class="comment">// .txt</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改路径"><a href="#修改路径" class="headerlink" title="修改路径"></a>修改路径</h4><ul>
<li>定义：调整 <code>path</code> 的组成部分，满足路径拼接、重命名等需求。</li>
<li>常用方法：<ul>
<li><code>replace_filename()</code>：替换文件名（如 <code>dir/file.txt</code> → <code>dir/new.txt</code>）；</li>
<li><code>replace_extension()</code>：替换后缀（如 <code>file.txt</code> → <code>file.jpg</code>）；</li>
<li><code>make_preferred()</code>：转换为当前系统首选分隔符（Windows <code>\</code>、Linux <code>/</code>）；</li>
<li><code>concat()</code>：拼接字符串（推荐用 <code>/</code> 运算符替代）。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;filesystem&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> fs = std::filesystem;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fs::path p = <span class="string">&quot;file.txt&quot;</span>;</span><br><span class="line">    p.<span class="built_in">replace_extension</span>(<span class="string">&quot;.jpg&quot;</span>); <span class="comment">// 改为 file.jpg</span></span><br><span class="line">    fs::path p2 = <span class="string">&quot;dir/sub&quot;</span>;</span><br><span class="line">    p2 = p2 / p; <span class="comment">// dir/sub/file.jpg</span></span><br><span class="line">    p<span class="number">2.</span><span class="built_in">make_preferred</span>(); <span class="comment">// 适配系统分隔符</span></span><br><span class="line">    std::cout &lt;&lt; p2 &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="常用方法汇总"><a href="#常用方法汇总" class="headerlink" title="常用方法汇总"></a>常用方法汇总</h4><table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>empty()</code></td>
<td>检查路径是否为空</td>
</tr>
<tr>
<td><code>is_absolute()</code></td>
<td>检查是否为绝对路径</td>
</tr>
<tr>
<td><code>is_relative()</code></td>
<td>检查是否为相对路径</td>
</tr>
<tr>
<td><code>lexically_normal()</code></td>
<td>规范化路径（消除 <code>./</code>、<code>../</code>）</td>
</tr>
<tr>
<td><code>absolute()</code></td>
<td>转换为绝对路径</td>
</tr>
</tbody></table>
<ul>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;filesystem&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> fs = std::filesystem;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fs::path p = <span class="string">&quot;dir/./sub/../file.txt&quot;</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;规范化前：&quot;</span> &lt;&lt; p &lt;&lt; std::endl; <span class="comment">// dir/./sub/../file.txt</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;规范化后：&quot;</span> &lt;&lt; p.<span class="built_in">lexically_normal</span>() &lt;&lt; std::endl; <span class="comment">// dir/file.txt</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="文件与目录操作"><a href="#文件与目录操作" class="headerlink" title="文件与目录操作"></a>文件与目录操作</h3><h4 id="检查文件类型"><a href="#检查文件类型" class="headerlink" title="检查文件类型"></a>检查文件类型</h4><ul>
<li>定义：判断路径指向的是普通文件、目录、符号链接等，核心函数 <code>file_status</code>&#x2F;<code>is_xxx()</code>。</li>
<li>常用函数：<ul>
<li><code>fs::status(p)</code>：获取文件状态；</li>
<li><code>fs::is_regular_file(p)</code>：是否为普通文件；</li>
<li><code>fs::is_directory(p)</code>：是否为目录；</li>
<li><code>fs::is_symlink(p)</code>：是否为符号链接；</li>
<li><code>fs::is_empty(p)</code>：文件 &#x2F; 目录是否为空。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;filesystem&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> fs = std::filesystem;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fs::path p = <span class="string">&quot;test.txt&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (fs::<span class="built_in">is_regular_file</span>(p)) &#123;</span><br><span class="line">        std::cout &lt;&lt; p &lt;&lt; <span class="string">&quot; 是普通文件&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fs::<span class="built_in">is_directory</span>(p)) &#123;</span><br><span class="line">        std::cout &lt;&lt; p &lt;&lt; <span class="string">&quot; 是目录&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="检查-操作文件和目录"><a href="#检查-操作文件和目录" class="headerlink" title="检查 &#x2F; 操作文件和目录"></a>检查 &#x2F; 操作文件和目录</h4><ul>
<li>常用操作：创建、删除、复制、移动文件 &#x2F; 目录，是文件系统最常用的功能。</li>
<li>常用函数：<ul>
<li>检查存在：<code>fs::exists(p)</code>；</li>
<li>创建目录：<code>fs::create_directory(p)</code>（单级）、<code>fs::create_directories(p)</code>（多级，如 <code>dir/sub/sub2</code>）；</li>
<li>复制：<code>fs::copy(p1, p2)</code>（文件 &#x2F; 目录，默认覆盖）；</li>
<li>移动 &#x2F; 重命名：<code>fs::rename(p1, p2)</code>；</li>
<li>删除：<code>fs::remove(p)</code>（删除文件 &#x2F; 空目录）、<code>fs::remove_all(p)</code>（递归删除目录及内容）；</li>
<li>获取大小：<code>fs::file_size(p)</code>（普通文件的字节数）。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;filesystem&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> fs = std::filesystem;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fs::path dir = <span class="string">&quot;dir/sub1&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (fs::<span class="built_in">exists</span>(dir) &amp;&amp; fs::<span class="built_in">is_directory</span>(dir)) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;目录存在&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;目录不存在&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 创建多级目录</span></span><br><span class="line">    fs::<span class="built_in">create_directories</span>(<span class="string">&quot;dir/sub/sub2&quot;</span>);</span><br><span class="line">    <span class="comment">// 复制文件</span></span><br><span class="line">    fs::<span class="built_in">copy</span>(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;dir/sub/test.txt&quot;</span>);</span><br><span class="line">    <span class="comment">// 删除空目录</span></span><br><span class="line">    fs::<span class="built_in">remove</span>(<span class="string">&quot;dir/sub/sub2&quot;</span>);</span><br><span class="line">    <span class="comment">// 递归删除目录</span></span><br><span class="line">    fs::<span class="built_in">remove_all</span>(<span class="string">&quot;dir&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h4><ul>
<li>定义：文件系统操作可能失败（如权限不足、文件不存在），需处理异常或检查返回值。</li>
<li>处理方式：<ol>
<li>异常方式（默认）：操作失败抛出 <code>std::filesystem::filesystem_error</code> 异常，用 <code>try-catch</code> 捕获；</li>
<li>错误码方式：给函数传入 <code>std::error_code</code> 参数，失败时设置错误码（不抛异常）。</li>
</ol>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;filesystem&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;system_error&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> fs = std::filesystem;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 方式1：异常处理</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        fs::<span class="built_in">remove</span>(<span class="string">&quot;non_exist.txt&quot;</span>); <span class="comment">// 删除不存在的文件</span></span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> fs::filesystem_error&amp; e) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;异常：&quot;</span> &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 方式2：错误码处理（推荐，避免异常开销）</span></span><br><span class="line">    std::error_code ec;</span><br><span class="line">    fs::<span class="built_in">remove</span>(<span class="string">&quot;non_exist.txt&quot;</span>, ec);</span><br><span class="line">    <span class="keyword">if</span> (ec) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;错误：&quot;</span> &lt;&lt; ec.<span class="built_in">message</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="目录迭代器"><a href="#目录迭代器" class="headerlink" title="目录迭代器"></a>目录迭代器</h3><h4 id="普通目录迭代（构造、目录条目）"><a href="#普通目录迭代（构造、目录条目）" class="headerlink" title="普通目录迭代（构造、目录条目）"></a>普通目录迭代（构造、目录条目）</h4><ul>
<li>定义：<code>fs::directory_iterator</code> 用于遍历目录下的直接文件 &#x2F; 子目录（不递归），迭代器指向 <code>fs::directory_entry</code>。</li>
<li>要点：<ul>
<li>迭代器默认指向目录第一个条目，<code>end()</code> 表示遍历结束；</li>
<li><code>directory_entry</code> 可通过 <code>path()</code> 获取路径，<code>status()</code> 获取文件状态。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;filesystem&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> fs = std::filesystem;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fs::path dir = <span class="string">&quot;./&quot;</span>; <span class="comment">// 当前目录</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> fs::directory_entry&amp; entry : fs::<span class="built_in">directory_iterator</span>(dir)) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;路径：&quot;</span> &lt;&lt; entry.<span class="built_in">path</span>() </span><br><span class="line">                  &lt;&lt; <span class="string">&quot; 是目录？&quot;</span> &lt;&lt; (fs::<span class="built_in">is_directory</span>(entry) ? <span class="string">&quot;是&quot;</span> : <span class="string">&quot;否&quot;</span>) </span><br><span class="line">                  &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="递归目录迭代"><a href="#递归目录迭代" class="headerlink" title="递归目录迭代"></a>递归目录迭代</h4><ul>
<li>定义：<code>fs::recursive_directory_iterator</code> 用于递归遍历目录下的所有文件 &#x2F; 子目录（包括嵌套目录）。</li>
<li>要点：<ul>
<li>支持跳过符号链接：构造时传入 <code>fs::directory_options::skip_permission_denied</code> 跳过无权限的目录；</li>
<li>可通过 <code>depth()</code> 获取当前迭代的目录深度。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;filesystem&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> fs = std::filesystem;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fs::path dir = <span class="string">&quot;./&quot;</span>;</span><br><span class="line">    <span class="comment">// 递归遍历，跳过权限不足的目录</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> fs::directory_entry&amp; entry : </span><br><span class="line">         fs::<span class="built_in">recursive_directory_iterator</span>(dir, fs::directory_options::skip_permission_denied)) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;深度：&quot;</span> &lt;&lt; entry.<span class="built_in">depth</span>() </span><br><span class="line">                  &lt;&lt; <span class="string">&quot; 路径：&quot;</span> &lt;&lt; entry.<span class="built_in">path</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="融合使用：fstream-与-filesystem-互操作"><a href="#融合使用：fstream-与-filesystem-互操作" class="headerlink" title="融合使用：fstream 与 filesystem 互操作"></a>融合使用：fstream 与 filesystem 互操作</h3><ul>
<li>场景：先用 <code>filesystem</code> 处理路径、检查文件状态，再用 <code>fstream</code> 读写文件，兼顾安全性和功能性。</li>
<li>关键流程：<ol>
<li>用 <code>path</code> 构造合法路径；</li>
<li>检查文件是否存在、是否为普通文件；</li>
<li>用 <code>fstream</code> 打开文件读写；</li>
<li>操作完成后，可通过 <code>filesystem</code> 获取文件大小、修改时间等。</li>
</ol>
</li>
<li>示例：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;filesystem&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> fs = std::filesystem;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fs::path p = <span class="string">&quot;test.txt&quot;</span>;</span><br><span class="line">    <span class="comment">// 1. 检查文件状态</span></span><br><span class="line">    <span class="keyword">if</span> (!fs::<span class="built_in">exists</span>(p) || !fs::<span class="built_in">is_regular_file</span>(p)) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;文件不存在或不是普通文件&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. 用fstream读写文件</span></span><br><span class="line">    <span class="function">std::ifstream <span class="title">ifs</span><span class="params">(p)</span></span>; <span class="comment">// path可直接传入fstream</span></span><br><span class="line">    <span class="function">std::string <span class="title">content</span><span class="params">((std::istreambuf_iterator&lt;<span class="type">char</span>&gt;(ifs)), std::istreambuf_iterator&lt;<span class="type">char</span>&gt;())</span></span>;</span><br><span class="line">    ifs.<span class="built_in">close</span>();</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;文件内容：&quot;</span> &lt;&lt; content &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. 获取文件信息</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;文件大小：&quot;</span> &lt;&lt; fs::<span class="built_in">file_size</span>(p) &lt;&lt; <span class="string">&quot; 字节&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/AillianYue">AillianYue</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://www.yuque.com/aillian-yue/blog">https://www.yuque.com/aillian-yue/blog</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">此文章版归AillianYue所有，如需转载，请注明来自原作者</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C/">C++</a></div><div class="post-share"><div class="social-share" data-image="/img/CPlusPlus.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2023/12/13/%E7%BA%B9%E7%90%86%E5%8E%8B%E7%BC%A9%E5%AD%A6%E4%B9%A0%E4%B8%8EASTC%E5%8A%A0%E8%BD%BD/" title="纹理压缩学习与ASTC加载"><img class="cover" src="/img/OpenGL.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">纹理压缩学习与ASTC加载</div></div><div class="info-2"><div class="info-item-1">加载ASTC_4x4文件以供OpenGL渲染使用</div></div></div></a><a class="pagination-related" href="/2023/12/03/C++%E5%9F%BA%E7%A1%80%EF%BC%9A%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="C++基础：异常处理"><img class="cover" src="/img/CPlusPlus.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">C++基础：异常处理</div></div><div class="info-2"><div class="info-item-1">介绍异常处理基础、主要用法示例以及GDB调试</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/12/03/C++%E5%85%AB%E8%82%A1%EF%BC%9A%E5%9F%BA%E7%A1%80/" title="C++八股：基础"><img class="cover" src="/img/CPlusPlus.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-03</div><div class="info-item-2">C++八股：基础</div></div><div class="info-2"><div class="info-item-1">介绍C++的基础八股知识</div></div></div></a><a class="pagination-related" href="/2024/12/03/C++%E5%85%AB%E8%82%A1%EF%BC%9A%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" title="C++八股：内存管理"><img class="cover" src="/img/CPlusPlus.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-03</div><div class="info-item-2">C++八股：内存管理</div></div><div class="info-2"><div class="info-item-1">介绍C++的内存管理八股知识</div></div></div></a><a class="pagination-related" href="/2024/12/03/C++%E5%85%AB%E8%82%A1%EF%BC%9ASTL/" title="C++八股：STL"><img class="cover" src="/img/CPlusPlus.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-03</div><div class="info-item-2">C++八股：STL</div></div><div class="info-2"><div class="info-item-1">介绍C++的STL八股知识</div></div></div></a><a class="pagination-related" href="/2023/12/03/C++%E5%9F%BA%E7%A1%80%EF%BC%9A%E8%BF%90%E7%AE%97%E7%AC%A6%E5%92%8C%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="C++基础：运算符和表达式"><img class="cover" src="/img/CPlusPlus.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-03</div><div class="info-item-2">C++基础：运算符和表达式</div></div><div class="info-2"><div class="info-item-1">介绍运算符、运算符重载、类型转换、关键修饰符和表达式特性、运算符优先级与结合性、求值顺序以及未定义行为</div></div></div></a><a class="pagination-related" href="/2023/12/03/C++%E5%9F%BA%E7%A1%80%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2/" title="C++基础：字符串"><img class="cover" src="/img/CPlusPlus.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-03</div><div class="info-item-2">C++基础：字符串</div></div><div class="info-2"><div class="info-item-1">介绍C风格字符串、字符串基本操作、特殊字符串处理以及性能优化</div></div></div></a><a class="pagination-related" href="/2023/12/03/C++%E5%9F%BA%E7%A1%80%EF%BC%9A%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="C++基础：异常处理"><img class="cover" src="/img/CPlusPlus.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-03</div><div class="info-item-2">C++基础：异常处理</div></div><div class="info-2"><div class="info-item-1">介绍异常处理基础、主要用法示例以及GDB调试</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">AillianYue</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><a id="card-info-btn" href="/about/"><i class="fas fa-user-graduate"></i><span>关于我</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/AillianYue" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://gitee.com/aillianyue" target="_blank" title="Gitee"><i class="fab fa-github-alt"></i></a><a class="social-icon" href="mailto:634558578@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=634558578&amp;website=www.oicqzone.com" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">本站不定期更新，欢迎！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#C-%E6%B5%81"><span class="toc-number">1.</span> <span class="toc-text">C++ 流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.1.</span> <span class="toc-text">基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E7%B1%BB"><span class="toc-number">1.1.1.</span> <span class="toc-text">流类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E7%8A%B6%E6%80%81"><span class="toc-number">1.1.2.</span> <span class="toc-text">流状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%93%E5%86%B2%E5%92%8C%E5%88%B7%E6%96%B0"><span class="toc-number">1.1.3.</span> <span class="toc-text">缓冲和刷新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E7%BA%B5%E7%AC%A6"><span class="toc-number">1.1.4.</span> <span class="toc-text">操纵符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">1.2.</span> <span class="toc-text">流的应用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%E9%80%82%E9%85%8D%E6%B5%81"><span class="toc-number">1.2.1.</span> <span class="toc-text">用户自定义类型适配流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B5%81"><span class="toc-number">1.2.2.</span> <span class="toc-text">字符串流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%B5%81"><span class="toc-number">1.2.3.</span> <span class="toc-text">文件流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E7%BC%93%E5%86%B2%E5%8C%BA"><span class="toc-number">1.2.4.</span> <span class="toc-text">流缓冲区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE"><span class="toc-number">1.2.5.</span> <span class="toc-text">随机访问</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%88std-filesystem%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">C++ 文件系统（std::filesystem）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">文件系统基础概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#std-filesystem-path"><span class="toc-number">2.2.</span> <span class="toc-text">std::filesystem::path</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E8%B7%AF%E5%BE%84"><span class="toc-number">2.2.1.</span> <span class="toc-text">构造路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%86%E8%A7%A3%E8%B7%AF%E5%BE%84"><span class="toc-number">2.2.2.</span> <span class="toc-text">拆解路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.2.3.</span> <span class="toc-text">修改路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E6%B1%87%E6%80%BB"><span class="toc-number">2.2.4.</span> <span class="toc-text">常用方法汇总</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C"><span class="toc-number">2.3.</span> <span class="toc-text">文件与目录操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.3.1.</span> <span class="toc-text">检查文件类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5-%E6%93%8D%E4%BD%9C%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95"><span class="toc-number">2.3.2.</span> <span class="toc-text">检查 &#x2F; 操作文件和目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">2.3.3.</span> <span class="toc-text">错误处理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-number">2.4.</span> <span class="toc-text">目录迭代器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E7%9B%AE%E5%BD%95%E8%BF%AD%E4%BB%A3%EF%BC%88%E6%9E%84%E9%80%A0%E3%80%81%E7%9B%AE%E5%BD%95%E6%9D%A1%E7%9B%AE%EF%BC%89"><span class="toc-number">2.4.1.</span> <span class="toc-text">普通目录迭代（构造、目录条目）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E7%9B%AE%E5%BD%95%E8%BF%AD%E4%BB%A3"><span class="toc-number">2.4.2.</span> <span class="toc-text">递归目录迭代</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%9E%8D%E5%90%88%E4%BD%BF%E7%94%A8%EF%BC%9Afstream-%E4%B8%8E-filesystem-%E4%BA%92%E6%93%8D%E4%BD%9C"><span class="toc-number">2.5.</span> <span class="toc-text">融合使用：fstream 与 filesystem 互操作</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/12/03/C++%E5%85%AB%E8%82%A1%EF%BC%9A%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" title="C++八股：内存管理"><img src="/img/CPlusPlus.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++八股：内存管理"/></a><div class="content"><a class="title" href="/2024/12/03/C++%E5%85%AB%E8%82%A1%EF%BC%9A%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" title="C++八股：内存管理">C++八股：内存管理</a><time datetime="2025-12-22T12:54:00.000Z" title="更新于 2025-12-22 20:54:00">2025-12-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/03/C++%E5%85%AB%E8%82%A1%EF%BC%9ASTL/" title="C++八股：STL"><img src="/img/CPlusPlus.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++八股：STL"/></a><div class="content"><a class="title" href="/2024/12/03/C++%E5%85%AB%E8%82%A1%EF%BC%9ASTL/" title="C++八股：STL">C++八股：STL</a><time datetime="2025-12-22T12:53:00.000Z" title="更新于 2025-12-22 20:53:00">2025-12-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/03/C++%E5%85%AB%E8%82%A1%EF%BC%9A%E5%9F%BA%E7%A1%80/" title="C++八股：基础"><img src="/img/CPlusPlus.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++八股：基础"/></a><div class="content"><a class="title" href="/2024/12/03/C++%E5%85%AB%E8%82%A1%EF%BC%9A%E5%9F%BA%E7%A1%80/" title="C++八股：基础">C++八股：基础</a><time datetime="2025-12-22T12:52:00.000Z" title="更新于 2025-12-22 20:52:00">2025-12-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/03/C++%E5%9F%BA%E7%A1%80%EF%BC%9A%E6%B5%81%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" title="C++基础：流与文件系统"><img src="/img/CPlusPlus.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++基础：流与文件系统"/></a><div class="content"><a class="title" href="/2023/12/03/C++%E5%9F%BA%E7%A1%80%EF%BC%9A%E6%B5%81%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" title="C++基础：流与文件系统">C++基础：流与文件系统</a><time datetime="2025-05-01T12:09:00.000Z" title="更新于 2025-05-01 20:09:00">2025-05-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/03/C++%E5%9F%BA%E7%A1%80%EF%BC%9A%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="C++基础：异常处理"><img src="/img/CPlusPlus.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++基础：异常处理"/></a><div class="content"><a class="title" href="/2023/12/03/C++%E5%9F%BA%E7%A1%80%EF%BC%9A%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="C++基础：异常处理">C++基础：异常处理</a><time datetime="2025-05-01T12:08:00.000Z" title="更新于 2025-05-01 20:08:00">2025-05-01</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2019 - 2025 By AillianYue</span></div><div class="footer_custom_text">Hi, welcome to <a target="_blank" rel="noopener" href="https://github.com/AillianYue">my blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>